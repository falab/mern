"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};window.Zframe=function(){function e(){l.app=document.getElementById("app")}function o(e){return Object.key(f.unloaded).indexOf(e)>-1}function n(e){return Object.keys(f.loaded).indexOf(e)>-1}function t(e){var r=f.unloaded[e];if("function"==typeof r)r={fn:r,scope:{}};else if(r.hasOwnProperty("length")){var i=r.pop();r={fn:i,dependencies:r,scope:{}}}else if("object"!==("undefined"==typeof r?"undefined":_typeof(r)))return void c.logger.error("module '"+e+"' could not be loaded.");r.hasOwnProperty("scope")||(r.scope={});var d=[l];void 0!==r.dependencies&&r.dependencies.forEach(function(r,i){if(!n(r)){if(!o)return void c.logger.error("module '"+e+"' dependency '"+r+"' is not a registered module.");t(r),d.push(f.loaded[r])}}),f.scopes[e]=r.scope,f.loaded[e]=r.fn.apply(r.scope,d),c.logger.info("module '"+e+"' loaded!"),delete f.unloaded[name]}function r(){Object.keys(f.unloaded).forEach(function(e){n(e)||t(e)})}function i(){Object.keys(a).forEach(function(e){a[e].init()})}var d={name:"Zframe",version:"0.0.0"},f={loaded:{},unloaded:{},scopes:{}},a={},l={},u={};u.controller={name:null,fn:null,deps:[l],isValid:function(){return"string"!=typeof this.name?!1:"function"!=typeof this.fn?!1:Array.isArray(this.deps)?!0:!1},loadDeps:function(){for(var e=1;e<this.deps.length;e++){var o=this.deps[e],n=f.loaded[o];void 0===n&&c.logger.warn("controller '"+this.name+"' dependency '"+o+"' is not a loaded module."),this.deps[e]=n}},init:function(){return this.isValid()?(this.loadDeps(),this.methods=this.fn.apply(this,this.deps),c.logger.info("controller '"+this.name+"' initialized."),!0):!1}};var c={};return c.logger={log:function(){console.log.apply(console,arguments)},info:function(e){console.info(d.name+": "+e)},warn:function(e){console.warn(d.name+": "+e)},error:function(e){console.error(d.name+": "+e)},table:function(){console.table.apply(console,arguments)}},c.xhr=function(){return function(e){"string"==typeof e&&(e={url:e}),c.logger.info("performing XHR to '"+e.url+"' here.")}},c.trigger=function(e,o,n){"string"==typeof e&&(e=document.querySelector(e));var t=new Event(o,{bubbles:!1,cancelable:!1});e.dispatchEvent(t)},c.bindEvent=function(e,o,n,t){"string"==typeof e&&(e=document.querySelector(e)),void 0===t&&("function"==typeof n?t=n:"object"===("undefined"==typeof n?"undefined":_typeof(n))&&(t=n.fn));var r=void 0;"string"==typeof n?r=n:"object"===("undefined"==typeof n?"undefined":_typeof(n))&&(r=n.query),void 0===("undefined"==typeof t?"undefined":_typeof(t))&&app.logger.error("couldn't find an event to bind"),void 0===r?e.addEventListener(o,t):e.addEventListener(o,function(o){var n=Array.prototype.slice.call(e.querySelectorAll(r));-1!==n.indexOf(o.target)&&t.apply(this,arguments)})},c.extend=function(e,o){return"object"===("undefined"==typeof o?"undefined":_typeof(o))?(Object.keys(o).forEach(function(n){e[n]=o[n]}),e):void 0},c.module=function(e,o){return void 0!==o?(-1!==Object.keys(f.unloaded).indexOf(e)?c.logger.warn("module '"+e+"' already registered for loading."):f.unloaded[e]=o,c):-1===Object.keys(f.loaded).indexOf(e)?c.logger.error("module '"+e+"' doesn't exist."):f.loaded[e]},c.controller=function(e,o){if(void 0!==o){if(-1!==Object.keys(a).indexOf(e))return c.logger.warn("controller '"+e+"' already loaded."),c;var n=Object.create(u.controller);return n.name=e,"function"==typeof o?n.fn=o:Array.isArray(o)?(n.fn=o.pop(),n.deps=n.deps.concat(o)):"object"===("undefined"==typeof o?"undefined":_typeof(o))&&c.extend(n.prototype,o),a[e]=n,c}return-1===Object.keys(a).indexOf(e)?c.logger.error("controller '"+e+"' doesn't exist."):a[e]},c.init=function(){e(),r(),i(),c.logger.info("initialization complete.")},c},window.zframe=Zframe(),zframe.module("main",function(e){var o={menuItems:[{path:"/",text:"home"},{path:"/portfolio",text:"portfolio"},{path:"http://www.google.com",text:"Google",remote:!0}]};e.app.innerHTML=zframe.Templates.application(o)}),zframe.module("zRouter",function(e){function o(e,o){return"string"!=typeof o.path?void zframe.logger.warn("Route '"+e+"' couldn't be added, path couldn't be processed."):("/"!==o.path[0]&&(o.path="/"+o.path),void(i[e]=o))}function n(e){return o("default",zframe.extend(e,{path:"/"}))}function t(e){var o=void 0;return Object.keys(i).every(function(n){return i[n].path===e?(o=i[n],!1):!0}),o}function r(e){zframe.logger.log("Process route '"+e.path+"'",e)}var i={home:{path:"/",controller:"homeController",action:"show",template:"home"},portfolio:{path:"/portfolio",controller:"portfolioController",action:"index",template:"portfolio"}};return zframe.bindEvent(e.app,"click","a",function(e){if(e.target.hasAttribute("href")){var o=t(e.target.getAttribute("href"));o&&(e.preventDefault(),history.pushState({route:o},"",o.path),r(o))}}),zframe.bindEvent(window,"popstate",function(e){r(e.state.route)}),{when:o,otherwise:n}}),zframe.controller("HomeController",["zRouter",function(e,o){return{index:function(){zframe.logger.info("HomeController index method ran"),zframe.logger.log(e,o)}}}]);
//# sourceMappingURL=application.min.js.map
