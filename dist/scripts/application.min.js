"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};window.Zframe=function(){function e(){d.app=document.getElementById("app")}function o(e){return Object.key(a.unloaded).indexOf(e)>-1}function n(e){return Object.keys(a.loaded).indexOf(e)>-1}function t(e){var r=a.unloaded[e];if("function"==typeof r)r={fn:r,scope:{}};else if(r.hasOwnProperty("length")){var l=r.pop();r={fn:l,dependencies:r,scope:{}}}else if("object"!==("undefined"==typeof r?"undefined":_typeof(r)))return void f.logger.error(i.name+" module '"+e+"' could not be loaded.");r.hasOwnProperty("scope")||(r.scope={});var u=[d];void 0!==r.dependencies&&r.dependencies.forEach(function(r,d){if(!n(r)){if(!o)return void f.logger.error(i.name+" module '"+e+"' dependency '"+r+"' is not a registered module.");t(r),u.push(a.loaded[r])}}),a.scopes[e]=r.scope,a.loaded[e]=r.fn.apply(r.scope,u),f.logger.info(i.name+" module '"+e+"' loaded!"),delete a.unloaded[name]}function r(){Object.keys(a.unloaded).forEach(function(e){n(e)||t(e)})}var i={name:"Zframe",version:"0.0.0"},a={loaded:{},unloaded:{},scopes:{}},d={},f={},l={};return f.logger={log:function(){console.log.apply(console,arguments)},info:function(){console.info.apply(console,arguments)},warn:function(){console.warn.apply(console,arguments)},error:function(){console.error.apply(console,arguments)},table:function(){console.table.apply(console,arguments)}},f.bindEvent=function(e,o,n,t){var r=void 0;void 0===t&&("function"==typeof n?t=n:"object"===("undefined"==typeof n?"undefined":_typeof(n))&&(t=n.fn)),"string"==typeof n?r=n:"object"===("undefined"==typeof n?"undefined":_typeof(n))&&(r=n.query),void 0===("undefined"==typeof t?"undefined":_typeof(t))&&app.logger.error(i.name+" couldn't find an event to bind"),void 0===r?e.addEventListener(o,t):e.addEventListener(o,function(o){var n=Array.prototype.slice.call(e.querySelectorAll(r));-1!==n.indexOf(o.target)&&t.apply(this,arguments)})},f.extend=function(e,o){return"object"===("undefined"==typeof o?"undefined":_typeof(o))?(Object.keys(o).forEach(function(n){e[n]=o[n]}),e):void 0},l.module=function(e,o){return void 0!==o?(-1!==Object.keys(a.unloaded).indexOf(e)?f.logger.warn(i.name+" module '"+e+"' already registered for loading."):a.unloaded[e]=o,a.unloaded[e]):-1===Object.keys(a.loaded).indexOf(e)?void f.logger.error(i.name+" module '"+e+"' doesn't exist."):a.loaded[e]},l.init=function(){e(),r(),f.logger.info(i.name+" initialization complete.")},f.logger.info(i.name+" v"+i.version+" loaded!"),f.extend(l,f)},window.zframe=Zframe(),zframe.module("main",function(e){var o={menuItems:[{path:"/",text:"home"},{path:"/portfolio",text:"portfolio"},{path:"http://www.google.com",text:"Google",remote:!0}]};e.app.innerHTML=zframe.Templates.application(o)}),zframe.module("zRouter",function(e){function o(e,o){return"string"!=typeof o.path?void zframe.logger.warn("Route '"+e+"' couldn't be added, path couldn't be processed."):("/"!==o.path[0]&&(o.path="/"+o.path),void(i[e]=o))}function n(e){return e.path="/",o("default",e)}function t(e){var o=void 0;return Object.keys(i).every(function(n){return i[n].path===e?(o=i[n],!1):!0}),o}function r(e){zframe.logger.log("Process route '"+e.path+"'",e)}var i={home:{path:"/",controller:"homeController",template:"home"},portfolio:{path:"/portfolio",controller:"portfolioController",template:"portfolio"}};return zframe.bindEvent(e.app,"click","a",function(e){if(e.target.hasAttribute("href")){var o=t(e.target.getAttribute("href"));o&&(e.preventDefault(),history.pushState({route:o},"",o.path),r(o))}}),zframe.bindEvent(window,"popstate",function(e){r(e.state.route)}),{when:o,otherwise:n}}),zframe.module("xhr",function(){return function(e){"string"==typeof e&&(e={url:e}),zframe.logger.info("Performing XHR to "+e.url+" here")}});
//# sourceMappingURL=application.min.js.map
